function createMindMap(t,a,e={}){const r=t.attr("width"),n=t.attr("height"),o=e.nodeRadius||10,s=e.linkColor||"#999",l=e.linkWidth||2,i=e.textFontSize||"12px",c=d3.scaleOrdinal(d3.schemeCategory10),d=t.append("g"),f=d3.zoom().scaleExtent([.1,4]).on("zoom",t=>{d.attr("transform",t.transform)});t.call(f);const p=d3.forceSimulation(a.nodes).force("link",d3.forceLink(a.links).id(t=>t.id).distance(100)).force("charge",d3.forceManyBody().strength(-500)).force("center",d3.forceCenter(r/2,n/2)).force("collide",d3.forceCollide(o+5)),y=d.append("g").attr("class","links").selectAll("line").data(a.links).enter().append("line").attr("stroke",s).attr("stroke-width",l),h=d.append("g").attr("class","nodes").selectAll("g").data(a.nodes).enter().append("g").attr("class","node");assignLayers(a.nodes[0],0),h.append("circle").attr("r",o).attr("fill",t=>c(t.layer)).attr("stroke","#000").attr("stroke-width",1.5),h.append("text").text(t=>t.name).attr("x",o+4).attr("y",3).style("font-size",i).style("fill","#333");const x=d3.drag().on("start",function(t,a){t.active||p.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y}).on("drag",function(t,a){a.fx=t.x,a.fy=t.y}).on("end",function(t,a){t.active||p.alphaTarget(0),a.fx=null,a.fy=null});h.call(x),p.on("tick",()=>{y.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),h.attr("transform",t=>`translate(${t.x},${t.y})`)});const g=t.append("g").attr("class","zoom-controls").attr("transform",`translate(${r-70}, 20)`);g.append("rect").attr("width",60).attr("height",30).attr("fill","#f0f0f0").attr("rx",5);const k=g.append("g").attr("class","zoom-in").attr("transform","translate(5, 5)").style("cursor","pointer").on("click",()=>f.scaleBy(t.transition().duration(300),1.3));k.append("rect").attr("width",20).attr("height",20).attr("fill","#fff").attr("stroke","#999"),k.append("text").attr("x",10).attr("y",15).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("+");const m=g.append("g").attr("class","zoom-out").attr("transform","translate(35, 5)").style("cursor","pointer").on("click",()=>f.scaleBy(t.transition().duration(300),.7));m.append("rect").attr("width",20).attr("height",20).attr("fill","#fff").attr("stroke","#999"),m.append("text").attr("x",10).attr("y",15).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("-")}function assignLayers(t,a){t.layer=a,t.children&&t.children.forEach(t=>assignLayers(t,a+1))}